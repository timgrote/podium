<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#6c63ff',
              'primary-hover': '#5a52d5',
              'dark-bg': '#1a1a2e',
              'dark-card': '#242442',
              'dark-border': '#444',
              'green-brand': '#2c5530',
              'green-brand-hover': '#1e3d22',
            }
          }
        }
      }
    </script>
    <style>
        .ach-details { display: none; }
        .ach-details.active { display: block; }
    </style>
    <title>Conductor - Invoice</title>
</head>
<body class="font-sans leading-relaxed text-gray-800 bg-gray-100">
    <div class="max-w-[700px] mx-auto py-10 px-5">
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="bg-green-brand text-white p-8 flex justify-between items-start">
                <div>
                    <h1 class="text-2xl">Conductor</h1>
                    <p class="text-sm opacity-90 mt-1">Irrigation Engineers, Inc.</p>
                </div>
                <div class="text-right">
                    <div class="text-xs opacity-80">Invoice</div>
                    <div class="text-xl font-bold" id="invoice-number">INV-2026-001</div>
                </div>
            </div>

            <div class="p-8">
                <div class="flex justify-between mb-8 pb-6 border-b border-gray-200">
                    <div>
                        <h3 class="text-xs text-gray-500 uppercase mb-2">Bill To</h3>
                        <p class="text-gray-800" id="client-name">Client Name</p>
                        <p class="text-gray-800" id="client-email">client@example.com</p>
                    </div>
                    <div>
                        <h3 class="text-xs text-gray-500 uppercase mb-2">Project</h3>
                        <p class="text-gray-800" id="project-name">Project Name</p>
                        <p class="text-gray-800" id="job-id">Job Reference</p>
                    </div>
                    <div>
                        <h3 class="text-xs text-gray-500 uppercase mb-2">Status</h3>
                        <span class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800" id="status">Pending</span>
                    </div>
                </div>

                <div class="mb-8">
                    <table class="w-full border-collapse">
                        <thead>
                            <tr>
                                <th class="text-left py-3 border-b-2 border-green-brand text-sm text-gray-500 uppercase">Description</th>
                                <th class="text-right py-3 border-b-2 border-green-brand text-sm text-gray-500 uppercase">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-4 border-b border-gray-200" id="scope">Irrigation design services per signed agreement</td>
                                <td class="py-4 border-b border-gray-200 text-right" id="amount">$0.00</td>
                            </tr>
                            <tr>
                                <td class="border-b-0 pt-5 font-bold text-xl">Total Due</td>
                                <td class="border-b-0 pt-5 font-bold text-xl text-right" id="total">$0.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="bg-gray-50 -mx-8 -mb-8 p-8">
                    <h2 class="text-lg mb-5 text-gray-800">Payment Options</h2>
                    <div class="flex gap-4">
                        <div class="flex-1 bg-white border-2 border-gray-200 rounded-lg p-5 text-center cursor-pointer transition-all hover:border-green-brand" id="stripe-option" onclick="window.open(stripeLink, '_blank')">
                            <div class="text-3xl mb-3">üí≥</div>
                            <h3 class="text-green-brand mb-2">Pay with Card</h3>
                            <p class="text-sm text-gray-500">Credit/Debit via Stripe</p>
                        </div>
                        <div class="flex-1 bg-white border-2 border-gray-200 rounded-lg p-5 text-center cursor-pointer transition-all hover:border-green-brand" onclick="toggleACH()">
                            <div class="text-3xl mb-3">üè¶</div>
                            <h3 class="text-green-brand mb-2">Pay via ACH</h3>
                            <p class="text-sm text-gray-500">Bank Transfer</p>
                        </div>
                    </div>
                    <div class="ach-details mt-5 bg-white p-5 rounded-lg border border-gray-300" id="ach-details">
                        <h4 class="mb-3 text-gray-800">ACH Transfer Details</h4>
                        <p class="font-mono bg-gray-100 py-2 px-3 rounded mb-2"><strong>Bank:</strong> [BANK NAME PLACEHOLDER]</p>
                        <p class="font-mono bg-gray-100 py-2 px-3 rounded mb-2"><strong>Routing:</strong> [ROUTING PLACEHOLDER]</p>
                        <p class="font-mono bg-gray-100 py-2 px-3 rounded mb-2"><strong>Account:</strong> [ACCOUNT PLACEHOLDER]</p>
                        <p class="font-mono bg-gray-100 py-2 px-3 rounded mb-2"><strong>Reference:</strong> <span id="ach-reference">INV-2026-001</span></p>
                        <p class="text-sm text-gray-500 mt-4 font-sans !bg-transparent !p-0">Please include the reference number in your transfer memo. After completing the transfer, submit your receipt below.</p>
                        <a href="#" class="inline-block mt-4 text-green-brand font-medium" id="receipt-link">Submit ACH Receipt ‚Üí</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get params from URL
        const params = new URLSearchParams(window.location.search);

        // Populate invoice from URL params
        if (params.get('invoice')) document.getElementById('invoice-number').textContent = params.get('invoice');
        if (params.get('client')) document.getElementById('client-name').textContent = params.get('client');
        if (params.get('email')) document.getElementById('client-email').textContent = params.get('email');
        if (params.get('project')) document.getElementById('project-name').textContent = params.get('project');
        if (params.get('job')) document.getElementById('job-id').textContent = params.get('job');
        if (params.get('scope')) document.getElementById('scope').textContent = params.get('scope');
        if (params.get('amount')) {
            const amt = '$' + parseFloat(params.get('amount')).toFixed(2);
            document.getElementById('amount').textContent = amt;
            document.getElementById('total').textContent = amt;
        }

        // Set ACH reference
        document.getElementById('ach-reference').textContent = params.get('invoice') || 'INV-2026-001';

        // Stripe link placeholder
        let stripeLink = params.get('stripe') || '#';

        // Receipt link
        const receiptUrl = `payment.html?job=${params.get('job') || ''}&invoice=${params.get('invoice') || ''}&email=${params.get('email') || ''}`;
        document.getElementById('receipt-link').href = receiptUrl;

        function toggleACH() {
            document.getElementById('ach-details').classList.toggle('active');
        }
    </script>
</body>
</html>
